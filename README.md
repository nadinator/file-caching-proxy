# file-caching-proxy

## Description
Caching is a great technique for improving the performance of a distributed system. It can help reduce data transfers, and improve the latency of operations. This project extends the simple remote file operations system built in the tcp repository. This project
will continue to use existing binary tools (e.g., 440read) and interpose on their C library calls. A working interposition library is provided. However, instead of connecting directly to a server, this library will connect to a caching proxy, found in this repository. This proxy will in turn connect to the server, also found here.
The proxy handles the RPC file operations from the client interposition library. It fetches whole files from the server, and caches them locally. YTthe protocol used between the proxy and the server, and how the cache will be managed, are self-defined. This protocol should offers open-close session semantics on whole files.
In addition to the client interposition library, a Java class is provided to handle the low-level RPC serialization with the client library. It calls the code to actually perform the operations. Implemented here is a class that implements an interface providing methods for open, read, write, ... operations that behave similar to their C counterparts. The proxy code is responsible for fetching and caching needed files from the server.

## Usage
The working directory contains the main Proxy and Server files.

The tools directory contains binary tools that perform I/O operations.
These will work on Linux x86 64-bit platforms (does NOT work on macOS or Windows).

The lib directory has lib440lib.so.  This is an interposition library
that will redirect file operations to RPC calls. It is used thusly:
	LD_PRELOAD=lib/lib440lib.so tools/440read foo
	(Use env if you are not running bash).
This will connect to a proxy port specified in proxyport15440
environment variable.  

Note: the protocol between the interposition library and the 
provided code for the proxy uses a shared secret pin to restrict
who is allowed to connect.  You must set the pin15440 environment 
variable to a secret 9-digit number of your choice.

The lib directory also has the RPCreceiver class and its support
interfaces.  This class implements the stubs in Java compatiable with
lib440lib.so.  The proxy code makes use of RPCreceiver to
interface with the clients. 

The doc directory has autogenerated javadoc documentation on
RPCreceiver and related classes. 

The sample directory has a simple skeleton implementation of a proxy
class, that shows how to interface to RPCreceiver.  To compile the sample,
make sure your CLASSPATH environment variable includes the absolute paths
to the lib and sample directories:
	export CLASSPATH=$PWD/lib:$PWD/sample
	(Use setenv if not using bash).
Then cd into the sample directory and run make.  Now you can run the 
skeleton proxy using:
	pin15440=ZZZZZZZZZ proxyport15440=XXXX java Proxy
The pin15440 variable should be the same 9-digit number as above.
Running a tool with the LD_PRELOAD of lib440lib.so will connect to the
Proxy, though none of the operations are actually implemented.  This
sample also shows how to compile a java program using a Makefile.  


